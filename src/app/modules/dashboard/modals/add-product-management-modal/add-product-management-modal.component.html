<h2 mat-dialog-title>Add Product Item</h2>
<section mat-dialog-content class="supplier-dashboard">
    <form [formGroup]="formGroup" class="productItemForm">
        <div class="generalInfos">
            <section>
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Barcode</mat-label>
                    <input matInput name="item_barcode" formControlName="item_barcode">
                    <mat-error *ngIf="
                    formGroup.get('item_barcode').invalid &&
                      (formGroup.get('item_barcode').dirty || formGroup.get('item_barcode').touched)
                    " class="alert alert-danger" >
                    <span *ngIf="formGroup.get('item_barcode').errors.required">
                          Barcode is required 
                         
                    </span>

                 
                    </mat-error>
                </mat-form-field>
            </section>
            <section>
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Item Online Price</mat-label>
                    <input matInput name="item_online_price" formControlName="item_online_price">

                    <mat-error *ngIf="
                    formGroup.get('item_online_price').invalid &&
                      (formGroup.get('item_online_price').dirty || formGroup.get('item_online_price').touched)
                    " class="alert alert-danger" >
                    <span *ngIf="formGroup.get('item_online_price').errors.required">
                          Online price is required 
                         
                    </span>

                 
                    </mat-error>
                </mat-form-field>
            </section>
            <section>
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Item Offline Price</mat-label>
                    <input matInput name="item_offline_price" formControlName="item_offline_price">

                    <mat-error *ngIf="
                    formGroup.get('item_offline_price').invalid &&
                      (formGroup.get('item_offline_price').dirty || formGroup.get('item_offline_price').touched)
                    " class="alert alert-danger" >
                    <span *ngIf="formGroup.get('item_offline_price').errors.required">
                          Offline price is required 
                         
                    </span>

                 
                    </mat-error>


                </mat-form-field>
            </section>
            <section>
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Item Package</mat-label>
                    <input matInput name="item_package" formControlName="item_package">


                    <mat-error *ngIf="
                    formGroup.get('item_package').invalid &&
                      (formGroup.get('item_package').dirty || formGroup.get('item_package').touched)
                    " class="alert alert-danger" >
                    <span *ngIf="formGroup.get('item_package').errors.required">
                          Item package is required 
                         
                    </span>

                 
                    </mat-error>

                    
                </mat-form-field>
            </section>
            <section>
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Item Box</mat-label>
                    <input matInput name="item_box" formControlName="item_box">


                    <mat-error *ngIf="
                    formGroup.get('item_box').invalid &&
                      (formGroup.get('item_box').dirty || formGroup.get('item_box').touched)
                    " class="alert alert-danger" >
                    <span *ngIf="formGroup.get('item_box').errors.required">
                          Item box is required 
                         
                    </span>

                 
                    </mat-error>


                </mat-form-field>
            </section>
            <section>
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Item Quantity</mat-label>
                    <input matInput name="item_quantity" formControlName="item_quantity">


                    
                    <mat-error *ngIf="
                    formGroup.get('item_quantity').invalid &&
                      (formGroup.get('item_quantity').dirty || formGroup.get('item_quantity').touched)
                    " class="alert alert-danger" >
                    <span *ngIf="formGroup.get('item_quantity').errors.required">
                          Item quantity is required 
                         
                    </span>

                 
                    </mat-error>




                </mat-form-field>
            </section>
            <section>
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Item Warn Quantity</mat-label>
                    <input matInput name="item_warn_quantity" formControlName="item_warn_quantity">


                         
                    <mat-error *ngIf="
                    formGroup.get('item_warn_quantity').invalid &&
                      (formGroup.get('item_warn_quantity').dirty || formGroup.get('item_warn_quantity').touched)
                    " class="alert alert-danger" >
                    <span *ngIf="formGroup.get('item_warn_quantity').errors.required">
                          Item warn quantity is required 
                         
                    </span>

                 
                    </mat-error>




                </mat-form-field>
            </section>
            <!-- <section>
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Item Discount Type</mat-label>
                    <input matInput name="item_discount_type" formControlName="item_discount_type">
                </mat-form-field>
            </section> -->
            <!-- <section>
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Item Discount Price</mat-label>
                    <input matInput name="item_discount_price" formControlName="item_discount_price">
                </mat-form-field>
            </section> -->
        </div>

        <div class="itemCriteria">
            <section *ngFor="let element of data">
                <section [ngSwitch]="getFieldType(element)">
                    <mat-form-field class="example-full-width" *ngSwitchCase="'color'" appearance="outline">
                        <mat-label>{{ element.name }}</mat-label>
                        <section class="inputContainer">
                            <input matInput [(cpOutputFormat)]="format" #colorValue
                                (colorPickerChange)="onColorPickerChange($event)" [(colorPicker)]="color"
                                [cpPosition]="'bottom-left'" [cpIgnoredElements]="[selectColorUnit]"
                                formControlName="{{ element.name + '-value' }}">
                            <section class="selectedColor" [style.background]="color"></section>
                            <mat-select value="" formControlName="{{ element.name + '-unit' }}"
                                (selectionChange)="onUnitSelectChange(element.name, $event)" #selectColorUnit>
                                <mat-option value="">Unit</mat-option>
                                <mat-option *ngFor="let unit of element.criteria_unit" [value]="unit.id">
                                    {{ unit.unit_name }}
                                </mat-option>
                            </mat-select>
                        </section>
                    </mat-form-field>
                    <mat-form-field class="example-full-width" *ngSwitchCase="'text'" appearance="outline">
                        <mat-label>{{ element.name }}</mat-label>
                        <section class="inputContainer">
                            <input matInput name="product_name" formControlName="{{ element.name + '-value' }}">
                            <mat-select value="" formControlName="{{ element.name + '-unit' }}"
                                (selectionChange)="onUnitSelectChange(element.name, $event)">
                                <mat-option value="">Unit</mat-option>
                                <mat-option *ngFor="let unit of element.criteria_unit" [value]="unit.id">
                                    {{ unit.unit_name }}
                                </mat-option>
                            </mat-select>
                        </section>
                    </mat-form-field>
                </section>
            </section>
        </div>

        <section class="imagesUploadSection" addDragDrop>
            <span>Select Images</span>
            <!-- <section id="imagesSelect" addDragDrop (click)="fileInput.click()">
                <input hidden type="file" #fileInput (change)="uploadFile($event.target.files)">
                <mat-icon>cloud_upload</mat-icon>
            </section> -->
            <ngx-dropzone [accept]="'image/*'" (change)="onSelect($event)">
                <ngx-dropzone-label>
                    <mat-icon>cloud_upload</mat-icon>
                </ngx-dropzone-label>
            </ngx-dropzone>
            <section class="selectedImages">
                <mat-card *ngFor="let f of files" [ngClass]="{ 'imageBackgroundStyle': f.uploaded }" [ngStyle]="{'background-color': f.uploaded ? 'unset' : '#E3E3E3', 'background-image':'url(' + f.image_url + ')',
                'background-position': 'center', 'background-size': 'cover', 'background-repeat': 'no-repeat' }"
                    (mouseenter)="f.hovered = !f.hovered" (mouseleave)="f.hovered = !f.hovered">
                    <mat-icon *ngIf="f.loaded && f.hovered" matTooltip="remove image" (click)="deleteImage(f.id)">
                        remove_circle</mat-icon>
                    <mat-spinner [diameter]="50" *ngIf="!f.loaded" mode="determinate" [value]="f.progress">
                    </mat-spinner>
                    <mat-spinner [diameter]="50" *ngIf="f.loaded && !f.uploaded"></mat-spinner>
                </mat-card>
                <!-- <ngx-dropzone-preview *ngFor="let f of files" [removable]="true" (removed)="onRemove(f)">
                    <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
                </ngx-dropzone-preview> -->
            </section>
        </section>


    </form>
</section>

<section mat-dialog-actions class="buttomActionContainer supplier-dashboard">
    <button mat-raised-button color="primary" (click)="onSubmit()" [ngStyle]="{'color': 'white'}">Confirm</button>
    <button mat-dialog-close mat-stroked-button color="primary" class="closeButton">Close</button>
    <!-- <mat-spinner [ngStyle]="{'display':'none'}" [diameter]="25" id="loadingSpinner" #loadingSpinner></mat-spinner> -->
</section>
