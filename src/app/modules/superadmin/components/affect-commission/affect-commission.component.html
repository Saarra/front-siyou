


<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"  >
<div class="jumbotron" style="margin-top: 60px;">

  <h2 > Suppliers List: ( <span style="color:red">{{sum_suppliers}}</span> accounts)</h2>
<hr style="margin-bottom: 40px;" >

  <div class="row w-100">
    <div class="col-md-3 ">
      <div class="card border-info mx-sm-1 p-3 shadow bg-white rounded">
        <div class="card border-info shadow text-info p-3 my-card"><span class="fa fa-eye" aria-hidden="true"></span>
        </div>
        <div class="text-info text-center mt-3">
          <h4>Total Accounts</h4>
        </div>
        <div class="text-info text-center mt-2">
          <h1> {{sum_suppliers}}</h1>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border-success mx-sm-1 p-3 shadow bg-white rounded">
        <div class="card border-success shadow text-success p-3 my-card"><span class="fa fa-eye"
            aria-hidden="true"></span></div>
        <div class="text-success text-center mt-3">
          <h4>Suppliers <span> </span> </h4>
        </div>
        <div class="text-success text-center mt-2">
          <h1>{{sum_suppliers}}</h1>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border-danger mx-sm-1 p-3 shadow bg-white rounded">
        <div class="card border-danger shadow text-danger p-3 my-card"><span class="fa fa-heart"
            aria-hidden="true"></span></div>
        <div class="text-danger text-center mt-3">
          <h4> Sales Managers</h4>
        </div>
        <div class="text-danger text-center mt-2">
          <h1>{{sum_salesmanagers}}</h1>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border-warning mx-sm-1 p-3 shadow bg-white rounded">
        <div class="card border-warning shadow text-warning p-3 my-card"><span class="fa fa-inbox"
            aria-hidden="true"></span></div>
        <div class="text-warning text-center mt-3">
          <h4> Shop Owners</h4>
        </div>
        <div class="text-warning text-center mt-2">
          <h1>{{sum_shop_owner}}</h1>
        </div>
      </div>
    </div>
  </div>
</div>






<button routerLink="../../superadmin/add-supplier" type="button" class="btn-lg btn-outline-primary mr-3 ml-4 mb-3">Add Supplier</button>
<!-- <button routerLink="../../superadmin/add-salesmanager" type="button" class="btn-lg btn-outline-success mr-3 ml-4">Add Sales Manager</button>
<button routerLink="../../superadmin/add-shop-owner" type="button" class="btn-lg btn-outline-danger mr-3 ml-4">Add Shop Owner</button> -->

<div class="mx-4">
  <mat-form-field>
    <input (keyup)="applyFilter($event.target.value)" matInput placeholder="Filter">
  </mat-form-field>
  <div class="mat-elevation-z8" style=" margin-bottom: 70px;">
    <h5 class="mx-2 my-2" style="padding-top: 10px;">List of Suppliers with their Commissions:</h5>

   
    <table mat-table [dataSource]="dataSource" matSort>

     

      <!-- Position Column -->
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> No. </th>
        <td mat-cell *matCellDef="let user"> {{user.id}} </td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="first_name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>First Name </th>
        <td mat-cell *matCellDef="let user"> {{user.first_name}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="last_name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Last Name </th>
        <td mat-cell *matCellDef="let user"> {{user.last_name}} </td>
      </ng-container>

      <!-- Symbol Column -->
      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Email </th>
        <td mat-cell *matCellDef="let user"> {{user.email}} </td>
      </ng-container>

      <ng-container matColumnDef="commission_percent">
        <th mat-header-cell *matHeaderCellDef mat-sort-header > Commission Percent </th>
        <td mat-cell *matCellDef="let user" style="color: red; font-weight: bold;"> {{user.siyoucommissions ? user.siyoucommissions.commission_percent : ''}}% </td>
        <!-- <td mat-cell *matCellDef="let user" style="color: red; font-weight: bold;"> {{ user.siyoucommissions[0].commission_percent}}% </td> -->
      </ng-container>

      <!-- <ng-container matColumnDef="commissionpercent">
        <th mat-header-cell *matHeaderCellDef> Email </th>
        <td mat-cell *matCellDef="let user"> 0 </td>
      </ng-container> -->

     

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef> Actions </th>
        <td mat-cell *matCellDef="let row">
          <button *ngIf="commissionExist(row.siyoucommissions.commission_percent)"  title="Add commission of this supplier" (click)="openAddDialog(row)" mat-icon-button class="add_button" ><i class="material-icons" >
            add_box
            </i>
        </button>
        <button *ngIf="!commissionExist(row.siyoucommissions.commission_percent)"  title="Update commission of this supplier" (click)="openUpdateDialog(row)" mat-icon-button class="update_button" ><i class="material-icons" >
          create
          </i>
      </button>
        
       
            
        </td>

       
        
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
  </div>
</div>

<!-- Copyright 2019 Google LLC. All Rights Reserved.
      Use of this source code is governed by an MIT-style license that
      can be found in the LICENSE file at http://angular.io/license -->